<app-tabbed-shell
  title="Tu espacio de paciente"
  subtitle="Actualizá tus datos personales y consultá tus próximos turnos."
  [tabs]="tabs"
  [errorMessage]="errorMessage()"
>
  <div slot="actions">
    <button class="btn btn-secondary" type="button" (click)="refresh()">
      Refrescar datos
    </button>
  </div>

  <div slot="profile">
    <app-patient-profile
      [patient]="profile()"
      [loading]="isLoadingProfile()"
      [saving]="isSavingProfile()"
      (save)="onProfileSave($event)"
    />
  </div>

  <div slot="appointments">
    <app-patient-appointments
      [appointments]="sortedAppointments()"
      [loading]="isLoadingAppointments()"
      [actionId]="appointmentActionId()"
      (cancel)="onCancelAppointment($event)"
      (confirm)="onConfirmAppointment($event)"
    />
  </div>

  <div slot="booking">
    <app-patient-booking
      [patientId]="currentUserId"
      (booked)="onAppointmentBooked($event)"
    />
  </div>

  <div slot="records">
    <app-patient-medical-records
      [records]="medicalRecords()"
      [loading]="isLoadingRecords()"
      [error]="recordsError()"
      (refresh)="onRefreshRecords()"
    />
  </div>
</app-tabbed-shell>
