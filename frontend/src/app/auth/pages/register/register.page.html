<section class="auth-card card">
  <header class="auth-card__header">
    <h2>Crear cuenta de paciente</h2>
    <p>Guardá tus datos para reservar turnos en segundos.</p>
  </header>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate class="auth-card__form">
    <label class="field">
      <span>Nombre completo</span>
      <input formControlName="full_name" class="input" placeholder="Nombre y apellido" />
      @if (form.controls.full_name.touched && form.controls.full_name.hasError('required')) {
        <small class="field__error">Indicá tu nombre y apellido.</small>
      } @else if (form.controls.full_name.touched && form.controls.full_name.hasError('pattern')) {
        <small class="field__error">Usá solo letras y espacios.</small>
      }
    </label>

    <label class="field">
      <span>Correo electrónico</span>
      <input type="email" formControlName="email" class="input" placeholder="tu@correo.com" />
      @if (form.controls.email.touched && form.controls.email.invalid) {
        <small class="field__error">Ingresá un email válido.</small>
      }
    </label>

    <div class="form-grid">
      <label class="field">
        <span>Contraseña</span>
        <input type="password" formControlName="password" class="input" placeholder="••••••••" />
        @if (form.controls.password.touched && form.controls.password.invalid) {
          <small class="field__error">Usá al menos 6 caracteres.</small>
        }
      </label>

      <label class="field">
        <span>Repetir contraseña</span>
        <input
          type="password"
          formControlName="confirmPassword"
          class="input"
          placeholder="Repetí tu contraseña"
        />
      </label>
    </div>

    <div class="form-grid">
      <label class="field">
        <span>Tipo de documento</span>
        <select formControlName="document_type" class="input">
          <option value="dni">DNI</option>
        </select>
      </label>

      <label class="field">
        <span>Número de documento</span>
        <input
          formControlName="document_number"
          class="input"
          inputmode="numeric"
          placeholder="Ej: 12345678"
        />
        @if (form.controls.document_number.touched && form.controls.document_number.invalid) {
          <small class="field__error">Ingresá un DNI válido (solo números).</small>
        }
      </label>
    </div>

    <label class="field">
      <span>Dirección</span>
      <input formControlName="address" class="input" placeholder="Calle y número" />
      @if (form.controls.address.touched && form.controls.address.invalid) {
        <small class="field__error">Ingresá tu domicilio.</small>
      }
    </label>

    <label class="field">
      <span>Teléfono</span>
      <input
        type="tel"
        inputmode="tel"
        autocomplete="tel"
        formControlName="phone"
        class="input"
        placeholder="Ej: +54 9 11 5555-0000"
      />
      @if (form.controls.phone.touched && form.controls.phone.hasError('required')) {
        <small class="field__error">Ingresá un teléfono de contacto.</small>
      } @else if (form.controls.phone.touched && form.controls.phone.hasError('pattern')) {
        <small class="field__error">Ingresá solo números y símbolos válidos (+ - () ).</small>
      }
    </label>

    <button class="btn btn-primary auth-card__submit" type="submit" [disabled]="isSubmitting">
      {{ isSubmitting ? 'Creando cuenta...' : 'Crear cuenta' }}
    </button>
  </form>

  <footer class="auth-card__footer">
    <span>¿Ya tenés cuenta?</span>
    <a routerLink="/auth/login">Ingresar</a>
  </footer>
</section>
